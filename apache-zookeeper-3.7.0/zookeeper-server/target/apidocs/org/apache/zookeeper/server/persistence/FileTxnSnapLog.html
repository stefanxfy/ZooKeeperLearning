<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_241) on Mon Nov 08 20:40:14 CST 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FileTxnSnapLog (Apache ZooKeeper - Server 3.7.0 API)</title>
<meta name="date" content="2021-11-08">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FileTxnSnapLog (Apache ZooKeeper - Server 3.7.0 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10};
var tabs = {65535:["t0","所有方法"],2:["t2","实例方法"],8:["t4","具体方法"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/FileTxnSnapLog.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnLog.FileTxnIterator.html" title="org.apache.zookeeper.server.persistence中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.DatadirException.html" title="org.apache.zookeeper.server.persistence中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/zookeeper/server/persistence/FileTxnSnapLog.html" target="_top">框架</a></li>
<li><a href="FileTxnSnapLog.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.zookeeper.server.persistence</div>
<h2 title="类 FileTxnSnapLog" class="title">类 FileTxnSnapLog</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.zookeeper.server.persistence.FileTxnSnapLog</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FileTxnSnapLog</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></pre>
<div class="block">This is a helper class
 above the implementations
 of txnlog and snapshot
 classes</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>嵌套类概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="嵌套类概要表, 列表嵌套类和解释">
<caption><span>嵌套类</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">类和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.DatadirException.html" title="org.apache.zookeeper.server.persistence中的类">FileTxnSnapLog.DatadirException</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.LogDirContentCheckException.html" title="org.apache.zookeeper.server.persistence中的类">FileTxnSnapLog.LogDirContentCheckException</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.PlayBackListener.html" title="org.apache.zookeeper.server.persistence中的接口">FileTxnSnapLog.PlayBackListener</a></span></code>
<div class="block">This listener helps
 the external apis calling
 restore to gather information
 while the data is being
 restored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.SnapDirContentCheckException.html" title="org.apache.zookeeper.server.persistence中的类">FileTxnSnapLog.SnapDirContentCheckException</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>字段概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="字段概要表, 列表字段和解释">
<caption><span>字段</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">字段和说明</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#version">version</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#VERSION">VERSION</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#ZOOKEEPER_DATADIR_AUTOCREATE">ZOOKEEPER_DATADIR_AUTOCREATE</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</a></span></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>构造器概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="构造器概要表, 列表构造器和解释">
<caption><span>构造器</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">构造器和说明</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#FileTxnSnapLog-java.io.File-java.io.File-">FileTxnSnapLog</a></span>(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;dataDir,
              <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;snapDir)</code>
<div class="block">the constructor which takes the datadir and
 snapdir.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>方法概要</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="方法概要表, 列表方法和解释">
<caption><span id="t0" class="activeTableTab"><span>所有方法</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">实例方法</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">具体方法</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">限定符和类型</th>
<th class="colLast" scope="col">方法和说明</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#append-org.apache.zookeeper.server.Request-">append</a></span>(<a href="../../../../../org/apache/zookeeper/server/Request.html" title="org.apache.zookeeper.server中的类">Request</a>&nbsp;si)</code>
<div class="block">append the request to the transaction logs</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#close--">close</a></span>()</code>
<div class="block">close the transaction log files</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#commit--">commit</a></span>()</code>
<div class="block">commit the transaction of logs</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#fastForwardFromEdits-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener-">fastForwardFromEdits</a></span>(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
                    <a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.PlayBackListener.html" title="org.apache.zookeeper.server.persistence中的接口">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)</code>
<div class="block">This function will fast forward the server database to have the latest
 transactions in it.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#findMostRecentSnapshot--">findMostRecentSnapshot</a></span>()</code>
<div class="block">the most recent snapshot in the snapshot
 directory</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#findNRecentSnapshots-int-">findNRecentSnapshots</a></span>(int&nbsp;n)</code>
<div class="block">the n most recent snapshots</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#findNValidSnapshots-int-">findNValidSnapshots</a></span>(int&nbsp;n)</code>
<div class="block">the n recent valid snapshots</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getDataDir--">getDataDir</a></span>()</code>
<div class="block">get the datadir used by this filetxn
 snap log</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getLastLoggedZxid--">getLastLoggedZxid</a></span>()</code>
<div class="block">the last logged zxid on the transaction logs</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/zookeeper/server/persistence/SnapshotInfo.html" title="org.apache.zookeeper.server.persistence中的类">SnapshotInfo</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getLastSnapshotInfo--">getLastSnapshotInfo</a></span>()</code>
<div class="block">get information of the last saved/restored snapshot</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getSnapDir--">getSnapDir</a></span>()</code>
<div class="block">get the snap dir used by this
 filetxn snap log</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getSnapshotLogs-long-">getSnapshotLogs</a></span>(long&nbsp;zxid)</code>
<div class="block">get the snapshot logs which may contain transactions newer than the given zxid.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getTotalLogSize--">getTotalLogSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#getTxnLogElapsedSyncTime--">getTxnLogElapsedSyncTime</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#processTransaction-org.apache.zookeeper.txn.TxnHeader-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.jute.Record-">processTransaction</a></span>(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html?is-external=true" title="org.apache.zookeeper.txn中的类或接口">TxnHeader</a>&nbsp;hdr,
                  <a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
                  <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
                  <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html?is-external=true" title="org.apache.jute中的类或接口">Record</a>&nbsp;txn)</code>
<div class="block">process the transaction on the datatree</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code><a href="../../../../../org/apache/zookeeper/server/persistence/TxnLog.TxnIterator.html" title="org.apache.zookeeper.server.persistence中的接口">TxnLog.TxnIterator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#readTxnLog-long-">readTxnLog</a></span>(long&nbsp;zxid)</code>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code><a href="../../../../../org/apache/zookeeper/server/persistence/TxnLog.TxnIterator.html" title="org.apache.zookeeper.server.persistence中的接口">TxnLog.TxnIterator</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#readTxnLog-long-boolean-">readTxnLog</a></span>(long&nbsp;zxid,
          boolean&nbsp;fastForward)</code>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#restore-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener-">restore</a></span>(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
       <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
       <a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.PlayBackListener.html" title="org.apache.zookeeper.server.persistence中的接口">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)</code>
<div class="block">this function restores the server
 database after reading from the
 snapshots and transaction logs</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#rollLog--">rollLog</a></span>()</code>
<div class="block">roll the transaction logs</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#save-org.apache.zookeeper.server.DataTree-java.util.concurrent.ConcurrentHashMap-boolean-">save</a></span>(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dataTree,
    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="java.util.concurrent中的类或接口">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
    boolean&nbsp;syncSnap)</code>
<div class="block">save the datatree and the sessions into a snapshot</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#setServerStats-org.apache.zookeeper.server.ServerStats-">setServerStats</a></span>(<a href="../../../../../org/apache/zookeeper/server/ServerStats.html" title="org.apache.zookeeper.server中的类">ServerStats</a>&nbsp;serverStats)</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#setTotalLogSize-long-">setTotalLogSize</a></span>(long&nbsp;size)</code>&nbsp;</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#shouldForceWriteInitialSnapshotAfterLeaderElection--">shouldForceWriteInitialSnapshotAfterLeaderElection</a></span>()</code>
<div class="block">whether to force the write of an initial snapshot after a leader election,
 to address ZOOKEEPER-3781 after upgrading from Zookeeper 3.4.x.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.html#truncateLog-long-">truncateLog</a></span>(long&nbsp;zxid)</code>
<div class="block">truncate the transaction logs the zxid
 specified</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>从类继承的方法&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="java.lang中的类或接口">Object</a></h3>
<code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone--" title="java.lang中的类或接口">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="java.lang中的类或接口">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize--" title="java.lang中的类或接口">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass--" title="java.lang中的类或接口">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="java.lang中的类或接口">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify--" title="java.lang中的类或接口">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="java.lang中的类或接口">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString--" title="java.lang中的类或接口">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait--" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="java.lang中的类或接口">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="java.lang中的类或接口">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>字段详细资料</h3>
<a name="VERSION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>VERSION</h4>
<pre>public static final&nbsp;int VERSION</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.VERSION">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="version">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>version</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a> version</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.version">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="ZOOKEEPER_DATADIR_AUTOCREATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZOOKEEPER_DATADIR_AUTOCREATE</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a> ZOOKEEPER_DATADIR_AUTOCREATE</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a> ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_DATADIR_AUTOCREATE_DEFAULT">常量字段值</a></dd>
</dl>
</li>
</ul>
<a name="ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</h4>
<pre>public static final&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="java.lang中的类或接口">String</a> ZOOKEEPER_SNAPSHOT_TRUST_EMPTY</pre>
<dl>
<dt><span class="seeLabel">另请参阅:</span></dt>
<dd><a href="../../../../../constant-values.html#org.apache.zookeeper.server.persistence.FileTxnSnapLog.ZOOKEEPER_SNAPSHOT_TRUST_EMPTY">常量字段值</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>构造器详细资料</h3>
<a name="FileTxnSnapLog-java.io.File-java.io.File-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FileTxnSnapLog</h4>
<pre>public&nbsp;FileTxnSnapLog(<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;dataDir,
                      <a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;snapDir)
               throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">the constructor which takes the datadir and
 snapdir.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>dataDir</code> - the transaction directory</dd>
<dd><code>snapDir</code> - the snapshot directory</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>方法详细资料</h3>
<a name="setServerStats-org.apache.zookeeper.server.ServerStats-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setServerStats</h4>
<pre>public&nbsp;void&nbsp;setServerStats(<a href="../../../../../org/apache/zookeeper/server/ServerStats.html" title="org.apache.zookeeper.server中的类">ServerStats</a>&nbsp;serverStats)</pre>
</li>
</ul>
<a name="getDataDir--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDataDir</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;getDataDir()</pre>
<div class="block">get the datadir used by this filetxn
 snap log</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the data dir</dd>
</dl>
</li>
</ul>
<a name="getSnapDir--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapDir</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;getSnapDir()</pre>
<div class="block">get the snap dir used by this
 filetxn snap log</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the snap dir</dd>
</dl>
</li>
</ul>
<a name="getLastSnapshotInfo--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastSnapshotInfo</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/zookeeper/server/persistence/SnapshotInfo.html" title="org.apache.zookeeper.server.persistence中的类">SnapshotInfo</a>&nbsp;getLastSnapshotInfo()</pre>
<div class="block">get information of the last saved/restored snapshot</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>info of last snapshot</dd>
</dl>
</li>
</ul>
<a name="shouldForceWriteInitialSnapshotAfterLeaderElection--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shouldForceWriteInitialSnapshotAfterLeaderElection</h4>
<pre>public&nbsp;boolean&nbsp;shouldForceWriteInitialSnapshotAfterLeaderElection()</pre>
<div class="block">whether to force the write of an initial snapshot after a leader election,
 to address ZOOKEEPER-3781 after upgrading from Zookeeper 3.4.x.</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>true if an initial snapshot should be written even if not otherwise required, false otherwise.</dd>
</dl>
</li>
</ul>
<a name="restore-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restore</h4>
<pre>public&nbsp;long&nbsp;restore(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
                    <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
                    <a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.PlayBackListener.html" title="org.apache.zookeeper.server.persistence中的接口">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">this function restores the server
 database after reading from the
 snapshots and transaction logs</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>dt</code> - the datatree to be restored</dd>
<dd><code>sessions</code> - the sessions to be restored</dd>
<dd><code>listener</code> - the playback listener to run on the
 database restoration</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the highest zxid restored</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="fastForwardFromEdits-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.zookeeper.server.persistence.FileTxnSnapLog.PlayBackListener-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fastForwardFromEdits</h4>
<pre>public&nbsp;long&nbsp;fastForwardFromEdits(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
                                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
                                 <a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.PlayBackListener.html" title="org.apache.zookeeper.server.persistence中的接口">FileTxnSnapLog.PlayBackListener</a>&nbsp;listener)
                          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">This function will fast forward the server database to have the latest
 transactions in it.  This is the same as restore, but only reads from
 the transaction logs and not restores from a snapshot.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>dt</code> - the datatree to write transactions to.</dd>
<dd><code>sessions</code> - the sessions to be restored.</dd>
<dd><code>listener</code> - the playback listener to run on the
 database transactions.</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the highest zxid restored.</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="readTxnLog-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTxnLog</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/zookeeper/server/persistence/TxnLog.TxnIterator.html" title="org.apache.zookeeper.server.persistence中的接口">TxnLog.TxnIterator</a>&nbsp;readTxnLog(long&nbsp;zxid)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>zxid</code> - starting zxid</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>TxnIterator</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="readTxnLog-long-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readTxnLog</h4>
<pre>public&nbsp;<a href="../../../../../org/apache/zookeeper/server/persistence/TxnLog.TxnIterator.html" title="org.apache.zookeeper.server.persistence中的接口">TxnLog.TxnIterator</a>&nbsp;readTxnLog(long&nbsp;zxid,
                                     boolean&nbsp;fastForward)
                              throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">Get TxnIterator for iterating through txnlog starting at a given zxid</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>zxid</code> - starting zxid</dd>
<dd><code>fastForward</code> - true if the iterator should be fast forwarded to point
        to the txn of a given zxid, else the iterator will point to the
        starting txn of a txnlog that may contain txn of a given zxid</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>TxnIterator</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="processTransaction-org.apache.zookeeper.txn.TxnHeader-org.apache.zookeeper.server.DataTree-java.util.Map-org.apache.jute.Record-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processTransaction</h4>
<pre>public&nbsp;void&nbsp;processTransaction(<a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/zookeeper/txn/TxnHeader.html?is-external=true" title="org.apache.zookeeper.txn中的类或接口">TxnHeader</a>&nbsp;hdr,
                               <a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dt,
                               <a href="https://docs.oracle.com/javase/8/docs/api/java/util/Map.html?is-external=true" title="java.util中的类或接口">Map</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessions,
                               <a href="http://zookeeper.apache.org/zookeeper-jute/apidocs/org/apache/jute/Record.html?is-external=true" title="org.apache.jute中的类或接口">Record</a>&nbsp;txn)
                        throws <a href="../../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="org.apache.zookeeper中的类">KeeperException.NoNodeException</a></pre>
<div class="block">process the transaction on the datatree</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>hdr</code> - the hdr of the transaction</dd>
<dd><code>dt</code> - the datatree to apply transaction to</dd>
<dd><code>sessions</code> - the sessions to be restored</dd>
<dd><code>txn</code> - the transaction to be applied</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="../../../../../org/apache/zookeeper/KeeperException.NoNodeException.html" title="org.apache.zookeeper中的类">KeeperException.NoNodeException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLastLoggedZxid--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastLoggedZxid</h4>
<pre>public&nbsp;long&nbsp;getLastLoggedZxid()</pre>
<div class="block">the last logged zxid on the transaction logs</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the last logged zxid</dd>
</dl>
</li>
</ul>
<a name="save-org.apache.zookeeper.server.DataTree-java.util.concurrent.ConcurrentHashMap-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>save</h4>
<pre>public&nbsp;void&nbsp;save(<a href="../../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a>&nbsp;dataTree,
                 <a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="java.util.concurrent中的类或接口">ConcurrentHashMap</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Long.html?is-external=true" title="java.lang中的类或接口">Long</a>,<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html?is-external=true" title="java.lang中的类或接口">Integer</a>&gt;&nbsp;sessionsWithTimeouts,
                 boolean&nbsp;syncSnap)
          throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">save the datatree and the sessions into a snapshot</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>dataTree</code> - the datatree to be serialized onto disk</dd>
<dd><code>sessionsWithTimeouts</code> - the session timeouts to be
 serialized onto disk</dd>
<dd><code>syncSnap</code> - sync the snapshot immediately after write</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="truncateLog-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncateLog</h4>
<pre>public&nbsp;boolean&nbsp;truncateLog(long&nbsp;zxid)</pre>
<div class="block">truncate the transaction logs the zxid
 specified</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>zxid</code> - the zxid to truncate the logs to</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>true if able to truncate the log, false if not</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="findMostRecentSnapshot--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findMostRecentSnapshot</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&nbsp;findMostRecentSnapshot()
                            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">the most recent snapshot in the snapshot
 directory</div>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the file that contains the most
 recent snapshot</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="findNRecentSnapshots-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNRecentSnapshots</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&gt;&nbsp;findNRecentSnapshots(int&nbsp;n)
                                throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">the n most recent snapshots</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>n</code> - the number of recent snapshots</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the list of n most recent snapshots, with
 the most recent in front</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="findNValidSnapshots-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>findNValidSnapshots</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/util/List.html?is-external=true" title="java.util中的类或接口">List</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>&gt;&nbsp;findNValidSnapshots(int&nbsp;n)
                               throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">the n recent valid snapshots</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>n</code> - the number of recent valid snapshots</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the list of n recent valid snapshots, with
 the most recent in front</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getSnapshotLogs-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSnapshotLogs</h4>
<pre>public&nbsp;<a href="https://docs.oracle.com/javase/8/docs/api/java/io/File.html?is-external=true" title="java.io中的类或接口">File</a>[]&nbsp;getSnapshotLogs(long&nbsp;zxid)</pre>
<div class="block">get the snapshot logs which may contain transactions newer than the given zxid.
 This includes logs with starting zxid greater than given zxid, as well as the
 newest transaction log with starting zxid less than given zxid.  The latter log
 file may contain transactions beyond given zxid.</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>zxid</code> - the zxid that contains logs greater than
 zxid</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>the snapshot logs which may contain transactions newer than the given zxid</dd>
</dl>
</li>
</ul>
<a name="append-org.apache.zookeeper.server.Request-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>append</h4>
<pre>public&nbsp;boolean&nbsp;append(<a href="../../../../../org/apache/zookeeper/server/Request.html" title="org.apache.zookeeper.server中的类">Request</a>&nbsp;si)
               throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">append the request to the transaction logs</div>
<dl>
<dt><span class="paramLabel">参数:</span></dt>
<dd><code>si</code> - the request to be appended</dd>
<dt><span class="returnLabel">返回:</span></dt>
<dd>true iff something appended, otw false</dd>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="commit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()
            throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">commit the transaction of logs</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getTxnLogElapsedSyncTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTxnLogElapsedSyncTime</h4>
<pre>public&nbsp;long&nbsp;getTxnLogElapsedSyncTime()</pre>
<dl>
<dt><span class="returnLabel">返回:</span></dt>
<dd>elapsed sync time of transaction log commit in milliseconds</dd>
</dl>
</li>
</ul>
<a name="rollLog--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollLog</h4>
<pre>public&nbsp;void&nbsp;rollLog()
             throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">roll the transaction logs</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()
           throws <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></pre>
<div class="block">close the transaction log files</div>
<dl>
<dt><span class="throwsLabel">抛出:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="java.io中的类或接口">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="setTotalLogSize-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTotalLogSize</h4>
<pre>public&nbsp;void&nbsp;setTotalLogSize(long&nbsp;size)</pre>
</li>
</ul>
<a name="getTotalLogSize--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTotalLogSize</h4>
<pre>public&nbsp;long&nbsp;getTotalLogSize()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../../overview-summary.html">概览</a></li>
<li><a href="package-summary.html">程序包</a></li>
<li class="navBarCell1Rev">类</li>
<li><a href="class-use/FileTxnSnapLog.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../../index-all.html">索引</a></li>
<li><a href="../../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnLog.FileTxnIterator.html" title="org.apache.zookeeper.server.persistence中的类"><span class="typeNameLink">上一个类</span></a></li>
<li><a href="../../../../../org/apache/zookeeper/server/persistence/FileTxnSnapLog.DatadirException.html" title="org.apache.zookeeper.server.persistence中的类"><span class="typeNameLink">下一个类</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?org/apache/zookeeper/server/persistence/FileTxnSnapLog.html" target="_top">框架</a></li>
<li><a href="FileTxnSnapLog.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>概要:&nbsp;</li>
<li><a href="#nested.class.summary">嵌套</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">方法</a></li>
</ul>
<ul class="subNavList">
<li>详细资料:&nbsp;</li>
<li><a href="#field.detail">字段</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">构造器</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">方法</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2008&#x2013;2021 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
