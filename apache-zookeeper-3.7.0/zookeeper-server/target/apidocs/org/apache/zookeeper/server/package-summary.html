<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_31) on Mon Nov 08 16:14:57 CST 2021 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>org.apache.zookeeper.server (Apache ZooKeeper - Server 3.7.0 API)</title>
<meta name="date" content="2021-11-08">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.apache.zookeeper.server (Apache ZooKeeper - Server 3.7.0 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>您的浏览器已禁用 JavaScript。</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../overview-summary.html">概览</a></li>
<li class="navBarCell1Rev">程序包</li>
<li>类</li>
<li><a href="package-use.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/zookeeper/metrics/impl/package-summary.html">上一个程序包</a></li>
<li><a href="../../../../org/apache/zookeeper/server/admin/package-summary.html">下一个程序包</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/zookeeper/server/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="程序包" class="title">程序包&nbsp;org.apache.zookeeper.server</h1>
<div class="docSummary">
<div class="block">ZooKeeper server theory of operation
ZooKeeperServer is designed to work in standalone mode and also
be extensible so that it can be used to implement the quorum based
version of ZooKeeper.</div>
</div>
<p>请参阅:&nbsp;<a href="#package.description">说明</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="接口概要表, 列表接口和解释">
<caption><span>接口概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">接口</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ConnectionMXBean.html" title="org.apache.zookeeper.server中的接口">ConnectionMXBean</a></td>
<td class="colLast">
<div class="block">This MBean represents a client connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DataTreeMXBean.html" title="org.apache.zookeeper.server中的接口">DataTreeMXBean</a></td>
<td class="colLast">
<div class="block">Zookeeper data tree MBean.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NodeHashMap.html" title="org.apache.zookeeper.server中的接口">NodeHashMap</a></td>
<td class="colLast">
<div class="block">The interface defined to manage the hash based on the entries in the
 nodes map.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/RequestProcessor.html" title="org.apache.zookeeper.server中的接口">RequestProcessor</a></td>
<td class="colLast">
<div class="block">RequestProcessors are chained together to process transactions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerStats.Provider.html" title="org.apache.zookeeper.server中的接口">ServerStats.Provider</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SessionTracker.html" title="org.apache.zookeeper.server中的接口">SessionTracker</a></td>
<td class="colLast">
<div class="block">This is the basic interface that ZooKeeperServer uses to track sessions.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SessionTracker.Session.html" title="org.apache.zookeeper.server中的接口">SessionTracker.Session</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SessionTracker.SessionExpirer.html" title="org.apache.zookeeper.server中的接口">SessionTracker.SessionExpirer</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerListener.html" title="org.apache.zookeeper.server中的接口">ZooKeeperServerListener</a></td>
<td class="colLast">
<div class="block">Listener for the critical resource events.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerMXBean.html" title="org.apache.zookeeper.server中的接口">ZooKeeperServerMXBean</a></td>
<td class="colLast">
<div class="block">ZooKeeper server MBean.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="类概要表, 列表类和解释">
<caption><span>类概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">类</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/AuthenticationHelper.html" title="org.apache.zookeeper.server中的类">AuthenticationHelper</a></td>
<td class="colLast">
<div class="block">Contains helper methods to enforce authentication</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/BlueThrottle.html" title="org.apache.zookeeper.server中的类">BlueThrottle</a></td>
<td class="colLast">
<div class="block">Implements a token-bucket based rate limiting mechanism with optional
 probabilistic dropping inspired by the BLUE queue management algorithm [1].</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ByteBufferInputStream.html" title="org.apache.zookeeper.server中的类">ByteBufferInputStream</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ByteBufferOutputStream.html" title="org.apache.zookeeper.server中的类">ByteBufferOutputStream</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ConnectionBean.html" title="org.apache.zookeeper.server中的类">ConnectionBean</a></td>
<td class="colLast">
<div class="block">Implementation of connection MBean interface.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ContainerManager.html" title="org.apache.zookeeper.server中的类">ContainerManager</a></td>
<td class="colLast">
<div class="block">Manages cleanup of container ZNodes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DatadirCleanupManager.html" title="org.apache.zookeeper.server中的类">DatadirCleanupManager</a></td>
<td class="colLast">
<div class="block">This class manages the cleanup of snapshots and corresponding transaction
 logs by scheduling the auto purge task with the specified
 'autopurge.purgeInterval'.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DataNode.html" title="org.apache.zookeeper.server中的类">DataNode</a></td>
<td class="colLast">
<div class="block">This class contains the data for a node in the data tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DataTree.html" title="org.apache.zookeeper.server中的类">DataTree</a></td>
<td class="colLast">
<div class="block">This class maintains the tree data structure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DataTree.ProcessTxnResult.html" title="org.apache.zookeeper.server中的类">DataTree.ProcessTxnResult</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DataTreeBean.html" title="org.apache.zookeeper.server中的类">DataTreeBean</a></td>
<td class="colLast">
<div class="block">This class implements the data tree MBean.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DigestCalculator.html" title="org.apache.zookeeper.server中的类">DigestCalculator</a></td>
<td class="colLast">
<div class="block">Defines how to calculate the digest for a given node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DumbWatcher.html" title="org.apache.zookeeper.server中的类">DumbWatcher</a></td>
<td class="colLast">
<div class="block">A empty watcher implementation used in bench and unit test.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ExpiryQueue.html" title="org.apache.zookeeper.server中的类">ExpiryQueue</a>&lt;E&gt;</td>
<td class="colLast">
<div class="block">ExpiryQueue tracks elements in time sorted fixed duration buckets.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/FinalRequestProcessor.html" title="org.apache.zookeeper.server中的类">FinalRequestProcessor</a></td>
<td class="colLast">
<div class="block">This Request processor actually applies any transaction associated with a
 request and services any queries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NettyServerCnxn.html" title="org.apache.zookeeper.server中的类">NettyServerCnxn</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NettyServerCnxnFactory.html" title="org.apache.zookeeper.server中的类">NettyServerCnxnFactory</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NIOServerCnxn.html" title="org.apache.zookeeper.server中的类">NIOServerCnxn</a></td>
<td class="colLast">
<div class="block">This class handles communication with clients using NIO.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NIOServerCnxnFactory.html" title="org.apache.zookeeper.server中的类">NIOServerCnxnFactory</a></td>
<td class="colLast">
<div class="block">NIOServerCnxnFactory implements a multi-threaded ServerCnxnFactory using
 NIO non-blocking socket calls.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NodeHashMapImpl.html" title="org.apache.zookeeper.server中的类">NodeHashMapImpl</a></td>
<td class="colLast">
<div class="block">a simple wrapper to ConcurrentHashMap that recalculates a digest after
 each mutation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ObserverBean.html" title="org.apache.zookeeper.server中的类">ObserverBean</a></td>
<td class="colLast">
<div class="block">ObserverBean</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/PrepRequestProcessor.html" title="org.apache.zookeeper.server中的类">PrepRequestProcessor</a></td>
<td class="colLast">
<div class="block">This request processor is generally at the start of a RequestProcessor
 change.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/PurgeTxnLog.html" title="org.apache.zookeeper.server中的类">PurgeTxnLog</a></td>
<td class="colLast">
<div class="block">this class is used to clean up the
 snapshot and data log dir's.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/RateLogger.html" title="org.apache.zookeeper.server中的类">RateLogger</a></td>
<td class="colLast">
<div class="block">This logs the message once in the beginning and once every LOG_INTERVAL.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ReferenceCountedACLCache.html" title="org.apache.zookeeper.server中的类">ReferenceCountedACLCache</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/Request.html" title="org.apache.zookeeper.server中的类">Request</a></td>
<td class="colLast">
<div class="block">This is the structure that represents a request moving through a chain of
 RequestProcessors.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/RequestThrottler.html" title="org.apache.zookeeper.server中的类">RequestThrottler</a></td>
<td class="colLast">
<div class="block">When enabled, the RequestThrottler limits the number of outstanding requests
 currently submitted to the request processor pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ResponseCache.html" title="org.apache.zookeeper.server中的类">ResponseCache</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxn.html" title="org.apache.zookeeper.server中的类">ServerCnxn</a></td>
<td class="colLast">
<div class="block">Interface to a Server connection - represents a connection from a client
 to the server.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxnFactory.html" title="org.apache.zookeeper.server中的类">ServerCnxnFactory</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxnHelper.html" title="org.apache.zookeeper.server中的类">ServerCnxnHelper</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerConfig.html" title="org.apache.zookeeper.server中的类">ServerConfig</a></td>
<td class="colLast">
<div class="block">Server configuration storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerMetrics.html" title="org.apache.zookeeper.server中的类">ServerMetrics</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerStats.html" title="org.apache.zookeeper.server中的类">ServerStats</a></td>
<td class="colLast">
<div class="block">Basic Server Statistics</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SessionTrackerImpl.html" title="org.apache.zookeeper.server中的类">SessionTrackerImpl</a></td>
<td class="colLast">
<div class="block">This is a full featured SessionTracker.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SessionTrackerImpl.SessionImpl.html" title="org.apache.zookeeper.server中的类">SessionTrackerImpl.SessionImpl</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SnapshotComparer.html" title="org.apache.zookeeper.server中的类">SnapshotComparer</a></td>
<td class="colLast">
<div class="block">SnapshotComparer is a tool that loads and compares two snapshots with configurable threshold and various filters, and outputs information about the delta.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SnapshotFormatter.html" title="org.apache.zookeeper.server中的类">SnapshotFormatter</a></td>
<td class="colLast">
<div class="block">Dump a snapshot file to stdout.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/SyncRequestProcessor.html" title="org.apache.zookeeper.server中的类">SyncRequestProcessor</a></td>
<td class="colLast">
<div class="block">This RequestProcessor logs requests to disk.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/TraceFormatter.html" title="org.apache.zookeeper.server中的类">TraceFormatter</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/TxnLogEntry.html" title="org.apache.zookeeper.server中的类">TxnLogEntry</a></td>
<td class="colLast">
<div class="block">A helper class to represent the txn entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/TxnLogProposalIterator.html" title="org.apache.zookeeper.server中的类">TxnLogProposalIterator</a></td>
<td class="colLast">
<div class="block">This class provides an iterator interface to access Proposal deserialized
 from on-disk txnlog.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/UnimplementedRequestProcessor.html" title="org.apache.zookeeper.server中的类">UnimplementedRequestProcessor</a></td>
<td class="colLast">
<div class="block">Manages the unknown requests (i.e. unknown OpCode), by:
 - sending back the KeeperException.UnimplementedException() error code to the client
 - closing the connection.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/WorkerService.html" title="org.apache.zookeeper.server中的类">WorkerService</a></td>
<td class="colLast">
<div class="block">WorkerService is a worker thread pool for running tasks and is implemented
 using one or more ExecutorServices.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/WorkerService.WorkRequest.html" title="org.apache.zookeeper.server中的类">WorkerService.WorkRequest</a></td>
<td class="colLast">
<div class="block">Callers should implement a class extending WorkRequest in order to
 schedule work with the service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZKDatabase.html" title="org.apache.zookeeper.server中的类">ZKDatabase</a></td>
<td class="colLast">
<div class="block">This class maintains the in memory database of zookeeper
 server states that includes the sessions, datatree and the
 committed logs.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperCriticalThread.html" title="org.apache.zookeeper.server中的类">ZooKeeperCriticalThread</a></td>
<td class="colLast">
<div class="block">Represents critical thread.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperSaslServer.html" title="org.apache.zookeeper.server中的类">ZooKeeperSaslServer</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServer.html" title="org.apache.zookeeper.server中的类">ZooKeeperServer</a></td>
<td class="colLast">
<div class="block">This class implements a simple standalone ZooKeeperServer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerBean.html" title="org.apache.zookeeper.server中的类">ZooKeeperServerBean</a></td>
<td class="colLast">
<div class="block">This class implements the ZooKeeper server MBean interface.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerConf.html" title="org.apache.zookeeper.server中的类">ZooKeeperServerConf</a></td>
<td class="colLast">
<div class="block">Configuration data for a <a href="../../../../org/apache/zookeeper/server/ZooKeeperServer.html" title="org.apache.zookeeper.server中的类"><code>ZooKeeperServer</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerMain.html" title="org.apache.zookeeper.server中的类">ZooKeeperServerMain</a></td>
<td class="colLast">
<div class="block">This class starts and runs a standalone ZooKeeperServer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServerShutdownHandler.html" title="org.apache.zookeeper.server中的类">ZooKeeperServerShutdownHandler</a></td>
<td class="colLast">
<div class="block">ZooKeeper server shutdown handler which will be used to handle ERROR or
 SHUTDOWN server state transitions, which in turn releases the associated
 shutdown latch.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperThread.html" title="org.apache.zookeeper.server中的类">ZooKeeperThread</a></td>
<td class="colLast">
<div class="block">This is the main class for catching all the uncaught exceptions thrown by the
 threads.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooTrace.html" title="org.apache.zookeeper.server中的类">ZooTrace</a></td>
<td class="colLast">
<div class="block">This class encapsulates and centralizes tracing for the ZooKeeper server.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="枚举概要表, 列表枚举和解释">
<caption><span>枚举概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">枚举</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/DatadirCleanupManager.PurgeTaskStatus.html" title="org.apache.zookeeper.server中的枚举">DatadirCleanupManager.PurgeTaskStatus</a></td>
<td class="colLast">
<div class="block">Status of the dataDir purge task</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/EphemeralType.html" title="org.apache.zookeeper.server中的枚举">EphemeralType</a></td>
<td class="colLast">
<div class="block">
 Abstraction that interprets the <code>ephemeralOwner</code> field of a ZNode.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/EphemeralTypeEmulate353.html" title="org.apache.zookeeper.server中的枚举">EphemeralTypeEmulate353</a></td>
<td class="colLast">
<div class="block">See https://issues.apache.org/jira/browse/ZOOKEEPER-2901

 version 3.5.3 introduced bugs associated with how TTL nodes were implemented. version 3.5.4
 fixes the problems but makes TTL nodes created in 3.5.3 invalid.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ExitCode.html" title="org.apache.zookeeper.server中的枚举">ExitCode</a></td>
<td class="colLast">
<div class="block">Exit code used to exit server</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/NettyServerCnxn.HandshakeState.html" title="org.apache.zookeeper.server中的枚举">NettyServerCnxn.HandshakeState</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/PrepRequestProcessor.DigestOpCode.html" title="org.apache.zookeeper.server中的枚举">PrepRequestProcessor.DigestOpCode</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxn.DisconnectReason.html" title="org.apache.zookeeper.server中的枚举">ServerCnxn.DisconnectReason</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServer.State.html" title="org.apache.zookeeper.server中的枚举">ZooKeeperServer.State</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="异常错误概要表, 列表异常错误和解释">
<caption><span>异常错误概要</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">异常错误</th>
<th class="colLast" scope="col">说明</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ClientCnxnLimitException.html" title="org.apache.zookeeper.server中的类">ClientCnxnLimitException</a></td>
<td class="colLast">
<div class="block">Indicates that the number of client connections has exceeded some limit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/RequestProcessor.RequestProcessorException.html" title="org.apache.zookeeper.server中的类">RequestProcessor.RequestProcessorException</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxn.CloseRequestException.html" title="org.apache.zookeeper.server中的类">ServerCnxn.CloseRequestException</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ServerCnxn.EndOfStreamException.html" title="org.apache.zookeeper.server中的类">ServerCnxn.EndOfStreamException</a></td>
<td class="colLast">&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/zookeeper/server/ZooKeeperServer.MissingSessionException.html" title="org.apache.zookeeper.server中的类">ZooKeeperServer.MissingSessionException</a></td>
<td class="colLast">&nbsp;</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="程序包org.apache.zookeeper.server的说明">程序包org.apache.zookeeper.server的说明</h2>
<div class="block"><h1>ZooKeeper server theory of operation</h1>
ZooKeeperServer is designed to work in standalone mode and also
be extensible so that it can be used to implement the quorum based
version of ZooKeeper.
<p>
ZooKeeper maintains a order when processing requests:
<ul>
<li>All requests will be processed in order.
<li>All responses will return in order.
<li>All watches will be sent in the order that the update takes place.
</ul>
<p>
We will explain the three aspects of ZooKeeperServer: request processing, data
structure maintenance, and session tracking.

<h2>Request processing</h2>

Requests are received by the ServerCnxn. Demarshalling of a request is
done by ClientRequestHandler. After a request has been demarshalled,
ClientRequestHandler invokes the relevant method in ZooKeeper and marshals
the result.
<p>
If the request is just a query, it will be processed by ZooKeeper and returned.
Otherwise, the request will be validated and a transaction will be generated
and logged. This the request will then wait until the request has been logged
before continuing processing.
<p>
Requests are logged as a group. Transactions are queued up and the SyncThread
will process them at predefined intervals. (Currently 20ms) The SyncThread
interacts with ZooKeeperServer the txnQueue. Transactions are added to the
txnQueue of SyncThread via queueItem. When the transaction has been synced to
disk, its callback will be invoked which will cause the request processing to
be completed.

<h2>Data structure maintenance</h2>

ZooKeeper data is stored in-memory. Each znode is stored in a DataNode object.
This object is accessed through a hash table that maps paths to DataNodes.
DataNodes also organize themselves into a tree. This tree is only used for
serializing nodes.
<p>
We guarantee that changes to nodes are stored to non-volatile media before
responding to a client. We do this quickly by writing changes as a sequence
of transactions in a log file. Even though we flush transactions as a group,
we need to avoid seeks as much as possible. Also, since the server can fail
at any point, we need to be careful of partial records.
<p>
We address the above problems by
<ul>
<li>Pre-allocating 1M chunks of file space. This allows us to append to the
file without causing seeks to update file size. It also means that we need
to check for the end of the log by looking for a zero length transaction
rather than simply end of file.
<li>Writing a signature at the end of each transaction. When processing
transactions, we only use transactions that have a valid signature at the end.
</ul>
<p>
As the server runs, the log file will grow quite large. To avoid long startup
times we periodically take a snapshot of the tree of DataNodes. We cannot
take the snapshot synchronously as the data takes a while to write out, so
instead we asynchronously write out the tree. This means that we end up
with a "corrupt" snapshot of the data tree. More formally if we define T
to be the real snapshot of the tree at the time we begin taking the snapshot
and l as the sequence of transactions that are applied to the tree between
the time the snapshot begins and the time the snapshot completes, we write
to disk T+l' where l' is a subset of the transactions in l. While we do not
have a way of figuring out which transactions make up l', it doesn't really
matter. T+l'+l = T+l since the transactions we log are idempotent (applying
the transaction multiple times has the same result as applying the transaction
once). So when we restore the snapshot we also play all transactions in the log
that occur after the snapshot was begun. We can easily figure out where to
start the replay because we start a new logfile when we start a snapshot. Both
the snapshot file and log file have a numeric suffix that represent the
transaction id that created the respective files.

<h2>Session tracking</h2>
Rather than tracking sessions exactly, we track them in batches. That are
processed at fixed intervals. This is easier to implement than exact
session tracking and it is more efficient in terms of performance. It also 
provides a small grace period for session renewal.</div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="跳过导航链接">跳过导航链接</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="导航">
<li><a href="../../../../overview-summary.html">概览</a></li>
<li class="navBarCell1Rev">程序包</li>
<li>类</li>
<li><a href="package-use.html">使用</a></li>
<li><a href="package-tree.html">树</a></li>
<li><a href="../../../../deprecated-list.html">已过时</a></li>
<li><a href="../../../../index-all.html">索引</a></li>
<li><a href="../../../../help-doc.html">帮助</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../org/apache/zookeeper/metrics/impl/package-summary.html">上一个程序包</a></li>
<li><a href="../../../../org/apache/zookeeper/server/admin/package-summary.html">下一个程序包</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/zookeeper/server/package-summary.html" target="_top">框架</a></li>
<li><a href="package-summary.html" target="_top">无框架</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">所有类</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2008&#x2013;2021 <a href="https://www.apache.org/">The Apache Software Foundation</a>. All rights reserved.</small></p>
</body>
</html>
